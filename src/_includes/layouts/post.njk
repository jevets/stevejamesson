{% extends "layouts/base.njk" %}

{% block og %}
<meta property="og:type" content="article">
<meta property="og:title" content="{{ title }}">
<meta property="article:published_time" content="{{ post.date | machineDate }}">
<meta property="article:author" content="{{ '/' | productionUrl }}">
{% if excerpt %}
  <meta property="og:description" content="{{ excerpt }}">
{% endif %}
{% if image %}
  <meta property="og:image" content="{{ image | productionUrl }}">
{% endif %}
{% endblock %}

{% block main %}
<div class="container">
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">{{ title }}</h1>
      <time class="post-pubdate" datetime="{{ page.date | machineDate }}">
        {{ page.date | readableDate }}
      <time>
      {% if excerpt %}
        <div class="post-excerpt">{{ excerpt }}</div>
      {% endif %}
    </header>

    {% set toc %}{{ content | toc | safe }}{% endset %}
    {% if toc %}
      <aside class="toc-container">
        <div class="toc-heading">Table of Contents</div>
        {{ toc | safe }}
      </aside>
    {% endif %}

    <div class="content post-content">
      {{ content | safe }}
    </div>
  </article>
</div>
{% endblock %}
